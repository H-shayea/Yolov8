#!/usr/bin/env python3
import cv2
import matplotlib.pyplot as plt
import numpy as np

# Load the original image
image = cv2.imread('street.ppm')
if image is None:
    print('Error: Could not load image')
    exit(1)

image_rgb = cv2.cvtColor(image, cv2.COLOR_BGR2RGB)

# Draw detections from C model
result_image = image_rgb.copy()

# Detection 1: bus (0.434)
cv2.rectangle(result_image, (12, 231), (803, 752), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.43', (12, 221), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 2: bus (0.749)
cv2.rectangle(result_image, (24, 229), (798, 753), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.75', (24, 219), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 3: bus (0.745)
cv2.rectangle(result_image, (26, 230), (797, 752), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.75', (26, 220), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 4: bus (0.799)
cv2.rectangle(result_image, (13, 230), (804, 762), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.80', (13, 220), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 5: bus (0.773)
cv2.rectangle(result_image, (24, 229), (803, 751), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.77', (24, 219), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 6: bus (0.788)
cv2.rectangle(result_image, (22, 229), (795, 751), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.79', (22, 219), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 7: bus (0.665)
cv2.rectangle(result_image, (9, 229), (804, 754), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.67', (9, 219), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 8: person (0.684)
cv2.rectangle(result_image, (215, 405), (345, 856), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.68', (215, 395), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 9: bus (0.849)
cv2.rectangle(result_image, (22, 230), (806, 753), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.85', (22, 220), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 10: bus (0.844)
cv2.rectangle(result_image, (15, 229), (793, 752), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.84', (15, 219), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 11: bus (0.297)
cv2.rectangle(result_image, (9, 229), (803, 751), (0, 255, 0), 2)
cv2.putText(result_image, 'bus: 0.30', (9, 219), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 12: person (0.710)
cv2.rectangle(result_image, (50, 398), (222, 903), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.71', (50, 388), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 13: person (0.699)
cv2.rectangle(result_image, (220, 407), (347, 862), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.70', (220, 397), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 14: person (0.783)
cv2.rectangle(result_image, (221, 406), (344, 858), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.78', (221, 396), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 15: person (0.672)
cv2.rectangle(result_image, (667, 391), (809, 877), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.67', (667, 381), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 16: person (0.794)
cv2.rectangle(result_image, (51, 399), (242, 902), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.79', (51, 389), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 17: person (0.815)
cv2.rectangle(result_image, (50, 398), (241, 903), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.82', (50, 388), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 18: person (0.846)
cv2.rectangle(result_image, (49, 399), (238, 899), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.85', (49, 389), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 19: person (0.813)
cv2.rectangle(result_image, (221, 407), (346, 860), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.81', (221, 397), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 20: person (0.840)
cv2.rectangle(result_image, (222, 407), (344, 858), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.84', (222, 397), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 21: person (0.766)
cv2.rectangle(result_image, (668, 394), (809, 878), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.77', (668, 384), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 22: person (0.819)
cv2.rectangle(result_image, (668, 393), (808, 877), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.82', (668, 383), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 23: person (0.805)
cv2.rectangle(result_image, (52, 399), (244, 902), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.81', (52, 389), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 24: person (0.843)
cv2.rectangle(result_image, (50, 397), (242, 903), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.84', (50, 387), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 25: person (0.853)
cv2.rectangle(result_image, (49, 399), (241, 902), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.85', (49, 389), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 26: person (0.780)
cv2.rectangle(result_image, (220, 407), (345, 858), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.78', (220, 397), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 27: person (0.803)
cv2.rectangle(result_image, (221, 406), (345, 859), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.80', (221, 396), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 28: person (0.856)
cv2.rectangle(result_image, (669, 391), (808, 876), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.86', (669, 381), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 29: person (0.870)
cv2.rectangle(result_image, (670, 391), (808, 876), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.87', (670, 381), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 30: person (0.268)
cv2.rectangle(result_image, (0, 548), (60, 874), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.27', (0, 538), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 31: person (0.816)
cv2.rectangle(result_image, (52, 397), (241, 903), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.82', (52, 387), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 32: person (0.813)
cv2.rectangle(result_image, (50, 394), (241, 903), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.81', (50, 384), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 33: person (0.826)
cv2.rectangle(result_image, (50, 398), (240, 903), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.83', (50, 388), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 34: person (0.795)
cv2.rectangle(result_image, (218, 408), (344, 858), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.80', (218, 398), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 35: person (0.821)
cv2.rectangle(result_image, (220, 407), (345, 859), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.82', (220, 397), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 36: person (0.840)
cv2.rectangle(result_image, (670, 394), (808, 875), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.84', (670, 384), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 37: person (0.849)
cv2.rectangle(result_image, (670, 395), (809, 875), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.85', (670, 385), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 38: person (0.395)
cv2.rectangle(result_image, (219, 409), (345, 859), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.39', (219, 399), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 39: person (0.859)
cv2.rectangle(result_image, (670, 397), (808, 876), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.86', (670, 387), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)
# Detection 40: person (0.855)
cv2.rectangle(result_image, (669, 397), (808, 876), (0, 255, 0), 2)
cv2.putText(result_image, 'person: 0.85', (669, 387), cv2.FONT_HERSHEY_SIMPLEX, 0.5, (0, 255, 0), 1)

# Display results
plt.figure(figsize=(15, 10))
plt.subplot(1, 2, 1)
plt.imshow(image_rgb)
plt.title('Original Image')
plt.axis('off')

plt.subplot(1, 2, 2)
plt.imshow(result_image)
plt.title('C Model Results (40 detections)')
plt.axis('off')

plt.tight_layout()
plt.savefig('c_model_detections.png', dpi=150, bbox_inches='tight')
plt.show()
print('âœ… Visualization saved as c_model_detections.png')
